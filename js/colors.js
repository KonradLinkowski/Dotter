export const colors = [
  { r: 255, g: 255, b: 255 },
  { r: 80, g: 96, b: 112 },
  { r: 255, g: 255, b: 255 },
  { r: 232, g: 232, b: 232 },
  { r: 228, g: 232, b: 232 },
  { r: 175, g: 181, b: 199 },
  { r: 156, g: 156, b: 156 },
  { r: 107, g: 90, b: 90 },
  { r: 89, g: 93, b: 96 },
  { r: 33, g: 33, b: 33 },
  { r: 106, g: 14, b: 21 },
  { r: 179, g: 0, b: 6 },
  { r: 178, g: 34, b: 34 },
  { r: 255, g: 99, b: 71 },
  { r: 255, g: 69, b: 0 },
  { r: 240, g: 128, b: 128 },
  { r: 255, g: 218, b: 185 },
  { r: 140, g: 107, b: 107 },
  { r: 137, g: 53, b: 29 },
  { r: 83, g: 33, b: 21 },
  { r: 51, g: 0, b: 0 },
  { r: 144, g: 116, b: 80 },
  { r: 222, g: 198, b: 156 },
  { r: 254, g: 204, b: 176 },
  { r: 255, g: 175, b: 125 },
  { r: 227, g: 160, b: 91 },
  { r: 231, g: 139, b: 62 },
  { r: 119, g: 65, b: 37 },
  { r: 179, g: 105, b: 78 },
  { r: 239, g: 145, b: 33 },
  { r: 230, g: 136, b: 29 },
  { r: 179, g: 84, b: 8 },
  { r: 250, g: 89, b: 71 },
  { r: 255, g: 126, b: 20 },
  { r: 255, g: 165, b: 49 },
  { r: 247, g: 186, b: 48 },
  { r: 247, g: 173, b: 99 },
  { r: 230, g: 192, b: 93 },
  { r: 221, g: 152, b: 46 },
  { r: 247, g: 209, b: 23 },
  { r: 243, g: 224, b: 85 },
  { r: 255, g: 227, b: 131 },
  { r: 235, g: 238, b: 143 },
  { r: 223, g: 238, b: 165 },
  { r: 188, g: 239, b: 102 },
  { r: 189, g: 198, b: 24 },
  { r: 166, g: 202, b: 85 },
  { r: 124, g: 144, b: 81 },
  { r: 46, g: 85, b: 67 },
  { r: 0, g: 100, b: 46 },
  { r: 16, g: 203, b: 49 },
  { r: 98, g: 245, b: 142 },
  { r: 165, g: 219, b: 181 },
  { r: 118, g: 162, b: 144 },
  { r: 0, g: 138, b: 128 },
  { r: 49, g: 181, b: 202 },
  { r: 181, g: 211, b: 214 },
  { r: 204, g: 255, b: 255 },
  { r: 20, g: 48, b: 68 },
  { r: 0, g: 87, b: 166 },
  { r: 51, g: 153, b: 255 },
  { r: 66, g: 192, b: 251 },
  { r: 97, g: 175, b: 255 },
  { r: 107, g: 173, b: 214 },
  { r: 159, g: 195, b: 233 },
  { r: 180, g: 210, b: 227 },
  { r: 125, g: 191, b: 221 },
  { r: 90, g: 113, b: 132 },
  { r: 80, g: 108, b: 239 },
  { r: 32, g: 50, b: 176 },
  { r: 52, g: 72, b: 164 },
  { r: 147, g: 145, b: 228 },
  { r: 201, g: 202, b: 226 },
  { r: 95, g: 38, b: 131 },
  { r: 165, g: 73, b: 156 },
  { r: 218, g: 112, b: 214 },
  { r: 136, g: 94, b: 158 },
  { r: 224, g: 170, b: 217 },
  { r: 177, g: 140, b: 191 },
  { r: 181, g: 125, b: 165 },
  { r: 181, g: 41, b: 82 },
  { r: 200, g: 112, b: 128 },
  { r: 247, g: 133, b: 177 },
  { r: 255, g: 187, b: 255 },
  { r: 255, g: 192, b: 203 },
  { r: 255, g: 225, b: 255 },
  { r: 80, g: 96, b: 112 },
  { r: 238, g: 238, b: 238 },
  { r: 147, g: 148, b: 132 },
  { r: 156, g: 0, b: 16 },
  { r: 255, g: 66, b: 49 },
  { r: 208, g: 64, b: 16 },
  { r: 233, g: 154, b: 58 },
  { r: 255, g: 215, b: 0 },
  { r: 235, g: 247, b: 45 },
  { r: 192, g: 245, b: 0 },
  { r: 16, g: 203, b: 49 },
  { r: 148, g: 229, b: 171 },
  { r: 52, g: 239, b: 85 },
  { r: 33, g: 118, b: 37 },
  { r: 0, g: 41, b: 107 },
  { r: 115, g: 132, b: 165 },
  { r: 104, g: 188, b: 197 },
  { r: 183, g: 200, b: 191 },
  { r: 185, g: 122, b: 177 },
  { r: 131, g: 32, b: 183 },
  { r: 206, g: 29, b: 155 },
  { r: 255, g: 130, b: 152 },
  { r: 80, g: 96, b: 112 },
  { r: 241, g: 242, b: 225 },
  { r: 220, g: 220, b: 220 },
  { r: 100, g: 90, b: 76 },
  { r: 84, g: 78, b: 79 },
  { r: 92, g: 102, b: 164 },
  { r: 60, g: 179, b: 113 },
  { r: 170, g: 77, b: 142 },
  { r: 80, g: 96, b: 112 },
  { r: 255, g: 255, b: 255 },
  { r: 212, g: 210, b: 205 },
  { r: 172, g: 183, b: 192 },
  { r: 141, g: 148, b: 156 },
  { r: 102, g: 102, b: 96 },
  { r: 231, g: 174, b: 90 },
  { r: 231, g: 149, b: 0 },
  { r: 173, g: 113, b: 24 },
  { r: 198, g: 105, b: 33 },
  { r: 86, g: 134, b: 174 },
  { r: 80, g: 96, b: 112 },
  { r: 255, g: 255, b: 255 },
  { r: 147, g: 148, b: 132 },
  { r: 104, g: 188, b: 197 },
  { r: 131, g: 32, b: 183 },
  { r: 206, g: 29, b: 155 },
  { r: 80, g: 96, b: 112 },
  { r: 192, g: 192, b: 192 },
  { r: 189, g: 181, b: 115 },
  { r: 184, g: 134, b: 11 },
  { r: 80, g: 96, b: 112 },
  { r: 212, g: 211, b: 221 },
  { r: 217, g: 217, b: 217 },
  { r: 212, g: 213, b: 201 },
  { r: 189, g: 198, b: 173 },
  { r: 80, g: 96, b: 112 },
  { r: 178, g: 173, b: 170 },
  { r: 208, g: 64, b: 16 },
  { r: 192, g: 245, b: 0 },
  { r: 104, g: 188, b: 197 },
  { r: 58, g: 43, b: 130 },
  { r: 206, g: 29, b: 155 },
  { r: 80, g: 96, b: 112 },
  { r: 124, g: 126, b: 124 },
  { r: 171, g: 148, b: 33 },
  { r: 95, g: 78, b: 71 },
  { r: 74, g: 99, b: 99 },
  { r: 80, g: 96, b: 112 },
  { r: 255, g: 255, b: 255 },
  { r: 175, g: 181, b: 199 },
  { r: 156, g: 156, b: 156 },
  { r: 89, g: 93, b: 96 },
  { r: 107, g: 90, b: 90 },
  { r: 0, g: 0, b: 0 },
  { r: 51, g: 0, b: 0 },
  { r: 92, g: 80, b: 48 },
  { r: 144, g: 116, b: 80 },
  { r: 222, g: 198, b: 156 },
  { r: 181, g: 44, b: 32 },
  { r: 244, g: 92, b: 64 },
  { r: 244, g: 123, b: 48 },
  { r: 247, g: 173, b: 99 },
  { r: 255, g: 227, b: 113 },
  { r: 254, g: 213, b: 87 },
  { r: 189, g: 198, b: 24 },
  { r: 125, g: 181, b: 56 },
  { r: 124, g: 144, b: 81 },
  { r: 39, g: 134, b: 126 },
  { r: 70, g: 112, b: 131 },
  { r: 0, g: 87, b: 166 },
  { r: 97, g: 175, b: 255 },
  { r: 104, g: 174, b: 206 },
  { r: 189, g: 125, b: 133 },
  { r: 247, g: 133, b: 177 },
  { r: 255, g: 255, b: 255 },
  { r: 89, g: 93, b: 96 },
  { r: 156, g: 156, b: 156 },
  { r: 0, g: 100, b: 0 },
  { r: 125, g: 181, b: 56 },
  { r: 0, g: 87, b: 166 },
  { r: 104, g: 174, b: 206 },
  { r: 75, g: 0, b: 130 },
  { r: 139, g: 0, b: 0 },
  { r: 254, g: 213, b: 87 },
  { r: 247, g: 173, b: 99 }
]

const cache = {}

export function getClosest(initialColor) {
  const key = JSON.stringify(initialColor)
  if (key in cache) {
    return cache[key]
  }

  let min = Number.POSITIVE_INFINITY
  let best = null
  for (const legoColor of colors) {
    const diff = (
      ((initialColor.r - legoColor.r) * 0.3) ** 2 // red
      + ((initialColor.g - legoColor.g) * 0.59) ** 2 // green
      + ((initialColor.b - legoColor.b) * 0.11) ** 2 // blue
    )
    if (diff < min) {
      min = diff
      best = legoColor
    }
  }

  const bestRBBA = { ...best, a: initialColor.a }

  cache[key] = bestRBBA

  return bestRBBA
}
